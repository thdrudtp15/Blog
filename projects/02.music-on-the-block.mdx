---
 title: '뮤직 온 더 블록'
 description: 'AI 음악 생성 플랫폼'
 period: {start: '2025-01', end: '2025-06'}
 tech: ['React', 'tanstack-query', 'redux-toolkit', 'OpenAI']
 thumbnail : /projects/thumbnail/music-on-the-block.webp
 type : '엔아이소프트'
 url : 'https://musicontheblock.com/'
---

# 🚩 프로젝트 개요

-   AI를 이용한 음악 생성 및 음악 공유 플랫폼

# 📝 주요 개발 내용

## 1️⃣ <u>음악 평가</u>

<ImageSlide
    images={[
        '/projects/content/mob/page_eval1.png',
        '/projects/content/mob/page_eval2.png',
        '/projects/content/mob/page_eval3.png',
    ]}
/>

### 담당 업무

**OpenAI API를 이용한 음악 평가 시스템 구축**

-   OpenAI API 기반 **음악 평가 시스템 설계 및 구현**
-   **음악 분석 결과(Emotion, Creativity 등 5개 항목)를 심사위원별 성향(가중치, 말투)에 맞춰 자동 평가**
-   GPT 응답의 필드 누락 등 **비정형성 해결을 위한 정규화 및 필드 검증 로직 구현**

### 프로세스

<MdxImage
    src="/projects/content/mob/evaluation.svg"
    height={400}
    alt="음악 평가"
/>

### 기술적 해결

**✅ 웹 소켓 제한 환경에서 폴링 기반 실시간 비동기 처리 구현**
- **문제**: 서버 환경 제약으로 웹 소켓 사용이 제한 됨, 실시간 처리 요구사항 충족 필요
- **해결**: Promise 기반 폴링 API 요청 설계
  - Promise 래퍼로 async/await 체인 유지
  - 재귀적 setTimeout을 활용한 안전한 폴링 구현
- **효과**: 
  - 웹 소켓 없이 실시간성 확보
  - **메모리 누수 방지** 및 **안정적인 비동기 처리**

**✅ GPT 응답 불안정성에 대한 재시도 및 검증 로직**
- **문제**: GPT API 응답의 불안정성으로 인한 높은 실패율 **(40% 이상)**
- **해결**: 다층 검증 및 재시도 메커니즘 구축
  - JSON 파싱 실패 시 자동 재요청
  - 필수 필드 존재 여부 검증
  - **최대 5회 재시도 루프**로 **응답 안정성 확보**
- **효과**: 
  - 음악 평가 실패율 **80% 이상 감소**
  - 사용자 경험 개선

**✅ 중앙 집중식 에러 핸들링 구조 설계**
- **문제**: 3단계 비동기 프로세스(Task ID 발급 → 분석 → 평가)에서 에러 전파 및 관리 복잡도 증가
- **해결**: 단일 try-catch 블록으로 전체 프로세스 에러 처리 통합
  - 각 단계별 개별 에러 핸들링 제거
  - 중앙 집중식 에러 처리로 일관된 에러 응답 제공
- **효과**: 
  - 코드 가독성 향상
  - 에러 처리 로직 단순화

---

## 2️⃣ <u>검색/필터링/페이지네이션 컴포넌트 모듈화</u>

### 담당 업무

-   여러 페이지에 중복 구현된 검색, 필터링, 페이지네이션 기능을 **재사용 가능한 컴포넌트로 모듈화**
-   state 기반 관리를 **URL 쿼리파라미터** 방식으로 전환하여 상태 관리를 단순화
-   **컴파운드 컴포넌트 패턴**으로 필터 옵션별(등급, 장르, AI 서비스 등) **유연한 조합 구현**

### 프로세스

<MdxImage
    src="/projects/content/mob/comp.svg"
    height={400}
    alt="컴포넌트 모듈화"
/>

### 기술적 해결

**✅ Query Parameter 기반 상태 관리로 전환**
- **문제**: useState로 분산 관리되던 검색/필터/페이지 상태로 인한 **상태 관리 복잡도 증가**
- **해결**: 모든 검색 및 필터 상태를 **URL 쿼리 파라미터로 통합**, 컴포넌트와 페이지의 기능 분리
  - 컴포넌트: URL 쿼리 파라미터 조작을 담당
  - 페이지: URL 쿼리 파라미터 기반 **API 요청 처리**
- **효과**: 
  - 관심사 분리를 통한 코드 구조 개선
  - URL 공유를 통한 특정 검색 결과 전달 가능

**✅ 컴파운드 컴포넌트 패턴 적용**
- **문제**: 필터 종류가 추가될 때마다 컴포넌트 수정이 필요하여 확장성 부족
- **해결**: Children 문법을 활용한 컴파운드 컴포넌트 패턴 도입
  - 필터 종류별(등급, 장르, AI 서비스 등) 독립적인 컴포넌트 구성
  - 선택적 조합을 통한 유연한 필터 구성 가능
- **효과**: 
  - 필터 옵션 추가 시 기존 코드 수정 없이 확장 가능
  - 컴포넌트 재사용성 및 유지보수성 향상

**✅ ContentWrap 레이아웃 컴포넌트 설계**
- **문제**: 페이지별 레이아웃 구조 불일치로 인한 스타일 관리의 어려움
- **해결**: 일관된 페이지 레이아웃을 제공하는 Wrapper 컴포넌트 구현
- **효과**: 
  - 전체 페이지의 스타일 일관성 확보
  - 레이아웃 변경 시 단일 컴포넌트 수정으로 전체 적용 가능
  - 유지보수성 강화 및 개발 생산성 향상

### 성과

-   유사 페이지 구현 시 작업 시간 **70% 단축** (컴포넌트 조립만으로 완성!)
-   필터 옵션 변경 시 **단일 컴포넌트 수정**으로 전체 페이지 일괄 적용
-   URL 쿼리파라미터 방식으로 URL 공유 및 브라우저 히스토리 지원 및 기능 분리

# ⚙️ 아키텍쳐 개선

## 1️⃣ <u>API 작업 최적화 (React Query 활용)</u>

-   react-query를 활용한 **쿼리 패칭**, **캐싱**, **무한 스크롤 구현**
-   **낙관적 업데이트**로 사용자 인터랙션 후 즉시 UI 반영 처리

### 성과

-   **react-query 캐싱**으로 중복 요청 최소화로 API 요청 **20%감소** 및 로딩 지연 방지
-   좋아요 등 즉각적인 반응이 필요한 기능의 경우 **낙관적 업데이트**로 **사용자 경험 개선**

---

## 2️⃣ <u>이미지 로딩 성능 최적화</u>

-   음악 앨범 커버 **로딩 지연 문제 발견 및 분석** (네트워크 탭 분석)
-   백엔드 개발자와 **협업**하여 **Cloudinary 이미지 최적화** 기능 도입 및 적용

### 성과

-   이미지 평균 로딩 시간 **1.5** -> **0.5**초로 약 **67%** 감소
